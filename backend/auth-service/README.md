# Сервис аутентификации

Сервис аутентификации на Node.js, построенный с использованием TypeScript, предоставляющий аутентификацию на основе JWT, управление пользователями и верификацию электронной почты.

## Возможности

- Аутентификация на основе JWT
- Регистрация и вход пользователей
- Сброс пароля по электронной почте
- Верификация электронной почты
- Управление сессиями
- Контроль доступа на основе ролей (если реализовано)
- Безопасное хеширование паролей с помощью bcrypt
- Валидация запросов
- Обработка ошибок и ведение журнала

## Предварительные требования

- Node.js (рекомендуется версия 16+)
- npm или yarn
- MongoDB (или другая база данных, если настроена)
- Redis (если используется для сессий)
- SMTP-сервис электронной почты (для верификации электронной почты)

## Установка

1. Клонируйте репозиторий
2. Перейдите в директорию сервиса аутентификации:
   ```bash
   cd backend/auth-service
   ```
3. Установите зависимости:
   ```bash
   npm install
   # или
   yarn install
   ```

## Конфигурация

1. Скопируйте `.env.example` в `.env` (создайте, если не существует)
2. Настройте переменные окружения:

```ini
# Приложение
PORT=3000
NODE_ENV=development
APP_NAME=AuthService
APP_URL=http://localhost:3000

# База данных
DB_URI=mongodb://localhost:27017/auth-service
DB_NAME=auth-service

# JWT
JWT_SECRET=ваш_jwt_секрет
JWT_EXPIRES_IN=1d
REFRESH_TOKEN_EXPIRES_IN=7d

# Электронная почта (для верификации)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=ваша_электронная_почта@example.com
SMTP_PASS=ваш_пароль_электронной_почты
EMAIL_FROM=no-reply@example.com
```

## Запуск сервиса

Режим разработки (с горячей перезагрузкой):
```bash
npm run dev
```

Режим производства:
```bash
npm start
```

## API Эндпоинты

### Аутентификация
- `POST /auth/register` - Регистрация пользователя
- `POST /auth/login` - Вход пользователя
- `POST /auth/refresh` - Обновление токена доступа
- `POST /auth/logout` - Выход (аннулирование токена)
- `POST /auth/verify-email` - Верификация адреса электронной почты
- `POST /auth/forgot-password` - Запрос на сброс пароля
- `POST /auth/reset-password` - Сброс пароля

### Пользователи
- `GET /users/me` - Получить профиль текущего пользователя
- `PATCH /users/me` - Обновить профиль текущего пользователя

## Разработка

### Структура проекта

```
src/
├── @types/            # Определения типов TypeScript
├── common/            # Общие утилиты и компоненты
│   ├── enums/         # Определения перечислений
│   ├── interface/     # Интерфейсы
│   ├── strategies/    # Стратегии аутентификации
│   ├── utils/         # Утилиты
│   └── validators/    # Валидаторы запросов
├── configuration/     # Конфигурация приложения
├── controller/        # Контроллеры маршрутов
├── database/          # Подключение к базе данных и модели
├── mail/              # Услуги электронной почты и шаблоны
├── middleware/        # Middleware для Express
├── module/            # Модули приложения
├── router/            # Определения маршрутов
└── service/           # Сервисы бизнес-логики
```

### Стиль кода

- Следуйте лучшим практикам TypeScript
- Используйте ESLint и Prettier для форматирования кода
- Пишите модульные тесты для новых функций
- Документируйте сложную логику комментариями
